<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="format-detection" content="telephone=no, email=no, address=no" />
<meta name="theme-color" content="#f8fafc" />
<meta name="description" content="Binaural Twin Wheels: mobile-friendly left/right split tone generator." />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<meta name="apple-mobile-web-app-title" content="Binaural Twin Wheels" />
<link rel="icon" href="favicon.svg" type="image/svg+xml" />
<link rel="apple-touch-icon" href="favicon.svg" />
<link rel="manifest" href="manifest.webmanifest" />
<title>Nestorium</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="command-center">
  <div class="command-bar-unified">
    <!-- Left: Brand -->
    <div class="page-header-brand">
      <div class="brand-icon">
        <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="18" stroke="url(#freq-gradient)" stroke-width="2" fill="none"/>
          <path d="M8 20 Q14 10 20 20 Q26 30 32 20" stroke="url(#freq-gradient)" stroke-width="2" fill="none"/>
          <path d="M8 20 Q14 25 20 20 Q26 15 32 20" stroke="url(#freq-gradient-alt)" stroke-width="1.5" fill="none" opacity="0.6"/>
          <defs>
            <linearGradient id="freq-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#9370db"/>
              <stop offset="50%" stop-color="#40e0d0"/>
              <stop offset="100%" stop-color="#ff69b4"/>
            </linearGradient>
            <linearGradient id="freq-gradient-alt" x1="100%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" stop-color="#ff69b4"/>
              <stop offset="100%" stop-color="#40e0d0"/>
            </linearGradient>
          </defs>
        </svg>
      </div>
      <div class="brand-text">
        <span class="brand-title">Nestorium</span>
      </div>
    </div>
    
    <!-- Center: Transport Controls -->
    <div class="controls" role="toolbar" aria-label="Transport controls">
      <button id="play">‚ñ∂ Play</button>
      <button id="pause">‚è∏ Pause</button>
      <button id="stop">‚ñ† Stop</button>
      <button id="reset">‚ü≤ Reset</button>
    </div>
    
    <!-- Right: Actions -->
    <div class="page-header-actions">
      <button id="themeToggle" class="icon-btn theme-btn-header" aria-label="Toggle theme" title="Toggle theme">‚òÄÔ∏è</button>
      <a href="https://www.paypal.com/donate/?hosted_button_id=ABRWM7GB438R4" target="_blank" rel="noopener noreferrer" class="donate-orb" aria-label="Support via PayPal">
        <span class="orb-glow"></span>
        <span class="orb-core">‚úß</span>
        <span class="orb-ring"></span>
        <span class="orb-particles">
          <span class="particle"></span>
          <span class="particle"></span>
          <span class="particle"></span>
        </span>
        <span class="orb-label">support üôè</span>
      </a>
    </div>
  </div>
  <div class="command-edge"></div>
</div>
<div class="app">

  <div class="grid">
    <div class="wheel-container">
      <div class="wheel" id="wheelL" aria-label="Left wheel"></div>
      <div class="wheel-controls">
        <div class="pan-control">
          <div class="pan-label">Pan</div>
          <div class="pan-slider-container">
            <span class="pan-label-marker">L</span>
            <input type="range" class="pan-slider" data-wheel="wheelL" min="-100" max="100" value="-100" step="1" aria-label="Pan left wheel">
            <span class="pan-label-marker">R</span>
          </div>
          <div class="pan-value" data-wheel="wheelL">L</div>
        </div>
        <button class="mute-btn" data-wheel="wheelL" aria-label="Mute/unmute wheel">
          <span class="mute-icon">üîä</span>
          <span class="mute-text">Mute</span>
        </button>
      </div>
    </div>
    <div class="mono-control-container">
      <div class="presets-section">
        <label for="presetSelect">Presets:</label>
        <select id="presetSelect" aria-label="Select preset">
          <option value="">Custom</option>
          <option value="0">Unison (1:1)</option>
          <option value="1">Octave (1:2)</option>
          <option value="2">Fifth (2:3)</option>
          <option value="3">Fourth (3:4)</option>
          <option value="4">Major Sixth (3:5)</option>
          <option value="5">Major Third (4:5)</option>
          <option value="6">Minor Third (5:6)</option>
          <option value="7">Minor Sixth (5:8)</option>
          <option value="8">Minor Seventh (5:9)</option>
          <option value="9">Major Second (8:9)</option>
          <option value="10">Major Seventh (8:15)</option>
          <option value="11">Minor Second (15:16)</option>
          <option value="12">Tritone (32:45)</option>
        </select>
      </div>
      
      <div class="live-info-section">
        <div class="live-info-label"></div>
        <div class="live-info-content">
          <div class="live-info-wheels">
            <div class="live-info-wheel-wrapper">
              <div class="live-info-item-label">Left Wheel</div>
              <div class="live-info-item">
                <div class="live-info-item-note" id="leftWheelNote">‚Äî</div>
                <div class="live-info-item-offset" id="leftWheelOffset">‚Äî</div>
                <div class="live-info-item-freq" id="leftWheelFreq">‚Äî</div>
              </div>
            </div>
            <div class="live-info-wheel-wrapper">
              <div class="live-info-item-label">Right Wheel</div>
              <div class="live-info-item">
                <div class="live-info-item-note" id="rightWheelNote">‚Äî</div>
                <div class="live-info-item-offset" id="rightWheelOffset">‚Äî</div>
                <div class="live-info-item-freq" id="rightWheelFreq">‚Äî</div>
              </div>
            </div>
          </div>
          <div class="live-info-item frequency-diff">
            <div class="live-info-item-label">Frequency Œî</div>
            <div class="live-info-item-value" id="frequencyDiff">‚Äî</div>
          </div>
          <div class="spectrogram-container">
            <div class="spectrogram-header">
              <span class="spectrogram-title">Waveform</span>
            </div>
            <div class="spectrogram-wrapper" id="spectrogramWrapper">
              <canvas id="spectrogramCanvas" width="200" height="80"></canvas>
              <div class="spectrogram-legend">
                <div class="legend-item legend-left"><span class="legend-dot"></span>L</div>
                <div class="legend-item legend-right"><span class="legend-dot"></span>R</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="bottom-controls">
        <div class="mono-control-label">Mono</div>
        <div class="mono-volume-bar">
          <div class="mono-volume-track">
            <div class="mono-volume-slider" id="monoSlider" role="slider" aria-label="Mono volume" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" tabindex="0"></div>
          </div>
        </div>
        <div class="mono-volume-value" id="monoVolumeValue">0%</div>
        <div class="fine-tune-container">
          <div class="fine-tune-label">Fine Tune</div>
          <div class="fine-tune-dial" id="fineTuneDial" role="slider" aria-label="Fine tune both wheels" tabindex="0">
            <div class="fine-tune-rotor">
              <div class="fine-tune-pointer"></div>
            </div>
            <div class="fine-tune-center">
              <div class="fine-tune-value" id="fineTuneValue">0.000 Hz</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="wheel-container">
      <div class="wheel" id="wheelR" aria-label="Right wheel"></div>
      <div class="wheel-controls">
        <div class="pan-control">
          <div class="pan-label">Pan</div>
          <div class="pan-slider-container">
            <span class="pan-label-marker">L</span>
            <input type="range" class="pan-slider" data-wheel="wheelR" min="-100" max="100" value="100" step="1" aria-label="Pan right wheel">
            <span class="pan-label-marker">R</span>
          </div>
          <div class="pan-value" data-wheel="wheelR">R</div>
        </div>
        <button class="mute-btn" data-wheel="wheelR" aria-label="Mute/unmute wheel">
          <span class="mute-icon">üîä</span>
          <span class="mute-text">Mute</span>
        </button>
      </div>
    </div>
  </div>

  <section class="keyboard-section" aria-label="Piano reference">
    <div class="keyboard-header">
      <h2>Piano Reference</h2>
      <div class="keyboard-toggles">
        <button class="note-system-toggle" id="noteSystemToggle" aria-label="Toggle note system">
          <span class="toggle-label">Show Musical Note</span>
        </button>
        <button class="overtone-highlight-toggle" id="overtoneHighlightToggle" aria-label="Toggle overtone highlights">
          <span class="toggle-label">Play Overtones</span>
        </button>
      </div>
    </div>
    <div class="piano-keyboard-wrapper">
      <div class="pitch-bend-wheel" id="pitchBendWheel" role="slider" aria-label="Pitch bend wheel" tabindex="0">
        <div class="pitch-bend-label">Scroll</div>
        <div class="pitch-bend-scroll-housing">
          <div class="pitch-bend-scroll-wheel" id="pitchBendScrollWheel">
            <div class="pitch-bend-ridges"></div>
          </div>
          <div class="pitch-bend-center-line"></div>
        </div>
        <div class="pitch-bend-value" id="pitchBendValue">+0.000</div>
      </div>
      <div id="pianoKeyboard" class="piano-keyboard"></div>
    </div>
  </section>

  <section class="overtones-section" aria-label="Harmonic Overtones">
    <div class="overtones-header">
      <h2>Overtones</h2>
      <div class="overtones-header-controls">
        <button class="harmonic-filter-toggle" id="harmonicOnlyToggle" aria-label="Play only harmonic overtones" title="Play only consonant harmonics (Fundamental, Octaves, Fifths, Thirds)">
          <span class="toggle-label">Harmonic Only</span>
        </button>
        <button class="overtones-replay-btn" id="overtonesReplay" aria-label="Replay harmonic sequence" title="Replay harmonics from fundamental">
          <span class="replay-icon">üîÑ</span>
          <span class="replay-text">Replay</span>
        </button>
        <button class="harmonic-filter-toggle" id="dissonantOnlyToggle" aria-label="Play only dissonant overtones" title="Play only dissonant harmonics (2nd, 4th, 6th, 7ths)">
          <span class="toggle-label">Dissonant Only</span>
        </button>
      </div>
    </div>
    <div class="overtones-container" id="overtonesContainer">
      <div class="overtones-display" id="overtonesDisplay">
        <!-- Overtone cards will be generated here -->
      </div>
    </div>
  </section>

  <footer class="footer">
    <p>Use headphones for binaural effect. Keep volume low for comfort.</p>
  </footer>
</div>

<script src="script.js"></script>
</body>
</html>

